<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Geolocalización</title>
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="load" id="load">
        <p>15410596 - Juan Daniel Martinez Navarro</p>
        <p>Obteniendo ubicación</p>
    </div>
    <div id="map"></div>
    <script>
        // Inicializar mapa centrado en Parral
        function initMap() {
            var load = document.getElementById('load');
            load.style.display = 'block';

            // Si la geolocalización está habilitada
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    var pos = {
                        lat: position.coords.latitude,
                        lng: position.coords.longitude
                    };

                    var map = new google.maps.Map(document.getElementById('map'), {
                        center: {
                            lat: 26.933071257230367,
                            lng: -105.66370751376643
                        },
                        zoom: 15
                    });

                    // Ocultar contenedor de carga
                    load.style.display = 'none';
                    
                    // Centrar mapa en posicion
                    map.setCenter(pos);

                    //Añadiendo marcador en posicion
                    var marker = new google.maps.Marker({
                        position: pos,
                        map: map
                    });
                }, mostrarErrores);
            } else {
                // Navegador no soporta geolocalizacion
                alert("Tu navegador no sporta la geolocalización");
            }
        }

        function mostrarErrores(error) {
            switch (error.code) {
                case error.PERMISSION_DENIED:
                    alert('Permiso denegado por el usuario');
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert('Posición no disponible');
                    break;
                case error.TIMEOUT:
                    alert('Tiempo de espera agotado');
                    break;
                default:
                    alert('Error de Geolocalización desconocido :' + error.code);
            }
        }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC75jJrrQe0xAlMfnJIyCqKQBbDdRfcSV8&callback=initMap" async defer></script>
</body>
</html>